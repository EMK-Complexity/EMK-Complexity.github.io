{% comment %}
Create empty array.
{% endcomment %}
{% assign events = '' | split: '' %}

{% for event in site.events %}
  {% for presenter in event.presenters %}
    {% if presenter.name contains include.key %}
      {% assign event.do_not_link_to_anchor = true %}
      {% assign events = events | push: event %}
    {% endif %}
  {% endfor %}

  {% for session in event.sessions %}
    {% assign event.do_not_link_to_anchor = forloop.first %}
    {% unless session.is_section_heading %}
      {% for presenter in session.presenters %}
        {% if presenter.name contains include.key %}
          {% assign event.session = session %}
          {% assign events = events | push: event %}
        {% endif %}
      {% endfor %}
    {% endunless %}
  {% endfor %}
{% endfor %}

{% if events.size > 0 %}
{% assign events = events | sort: 'date' | reverse %}
<div class="events-listing">
  <div class="events-listing-group">
      <h1>{{ include.heading }}</h1>
      <ul class="events-listing-posts">
        {% for event in events %}
          {% include post-listing-entry.html post=event session=event.session do_not_link_to_anchor=event.do_not_link_to_anchor %}
        {% endfor %}
    </ul>
  </div>
</div>
{% endif %}
